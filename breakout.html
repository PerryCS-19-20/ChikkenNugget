<!DOCTYPE html>
<html>
	<head>
		<title>Breakout</title>
                <link rel="stylesheet" type="text/css" href="style.css">
		
                <script type="text/javascript" src="menubar.js"></script>
	</head>
	<body style="background-color: olivedrab">
		<div id="menubar"></div>
                <br>
                <br>
                <br>

		<div id="canvasContainer" width="100%" style="width: 100%; height: 100%; overflow: hidden;">
			<canvas width="400" height="500" class="codehs-editor-canvas"></canvas>
		</div>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
		<script type="text/javascript" src="https://static.codehs.com/gulp/cb01b4a22ffd3971572a8a1ab9f3b7c4cb17f383/chs-js-lib/chs.js"></script>
		<script>
                      window.onload = function() {
buildMenu('menubar');
/* Constants for bricks */
var NUM_ROWS = 8;
var BRICK_TOP_OFFSET = 10;
var BRICK_SPACING = 2;
var NUM_BRICKS_PER_ROW = 10;
var BRICK_HEIGHT = 10;
var SPACE_FOR_BRICKS = getWidth() - (NUM_BRICKS_PER_ROW + 1) * BRICK_SPACING;
var BRICK_WIDTH = SPACE_FOR_BRICKS / NUM_BRICKS_PER_ROW;

/* Constants for ball and paddle */
var PADDLE_WIDTH = 80;
var PADDLE_HEIGHT = 15;
var PADDLE_OFFSET = 10;
//var randX = Randomizer.nextInt(-3.4,3.4);
//var randY = Randomizer.nextInt(1.9,3.4);
var dx = 4;
var dy = -3.2;


var BALL_RADIUS = 15;
var paddle = new Rectangle(PADDLE_WIDTH, PADDLE_HEIGHT);
var ball = new Circle(BALL_RADIUS);
ball.setPosition(getWidth()/2,getHeight()-100);
add(paddle);
var a = 2;
var counter = 0;
var speed = 5;


function start(){
	setTimer(ballMove,0.00001);
	mouseMoveMethod(paddleMove);
	setBricks();
	for(var i = 0; i < 10; i++){
        var a = a+BRICK_WIDTH;
    }
    
}

function ballMove(){
    ball.move(dx,dy);
    add(ball);
    if(ball.getX() + BALL_RADIUS > getWidth()){
        dx = -dx;
    }
    if(ball.getX()-BALL_RADIUS<0){
        dx = -dx;
    }
    if(ball.getY()-BALL_RADIUS<0){
        dy=-dy;
    }
    if(ball.getY()+BALL_RADIUS>getHeight()){
        stopTimer(ballMove);
        var loseMessage = new Text("You Lose");
        loseMessage.setPosition(getWidth()/2-100,getHeight()/2);
        loseMessage.setColor(Color.red);
        add(loseMessage);
    }
    
    
    var elem = getElementAt(ball.getX(), ball.getY()+BALL_RADIUS);
    if(elem == paddle){
        dy = -Math.abs(dy);
    }
    
    var elem2 = getElementAt(ball.getX(), ball.getY()-BALL_RADIUS);
    if(elem2 != null){
        dy = -dy;
        remove(elem2);
        counter++;
    }else{
	    var elem3 = getElementAt(ball.get()-BRICK_SPACING, ball.getY()-BALL_RADIUS);
	  if(elem3 != null){
		dy = -dy;
		remove(elem3);
		counter++;  
	  }else{
		var elem4 = getElementAt(ball.getX()+BRICK_SPACING, ball.getY()-BALL_RADIUS);	
		if(elem4 != null){
			dy = -dy;
			remove(elem4);
			counter++;
		}
	  }
    }
    
    if(counter==80){
        stopTimer(ballMove);
        var winText = new Text("You Win!!");
        winText.setPosition(getWidth()/2-100,getHeight()/2);
        winText.setColor(Color.green);
        add(winText)
    }
}

function paddleMove(e){
    paddle.setPosition(e.getX()-PADDLE_WIDTH/2,getHeight()-PADDLE_OFFSET-PADDLE_HEIGHT);
    
}

function setBricks(){
    for(var i = 0; i < 12;i++){
        var redBricks = new Rectangle(BRICK_WIDTH,BRICK_HEIGHT);
        redBricks.setPosition(BRICK_SPACING+i*40-81, BRICK_TOP_OFFSET);
        redBricks.setColor(Color.red);
        add(redBricks);
        var redBricks = new Rectangle(BRICK_WIDTH, BRICK_HEIGHT);
        redBricks.setPosition(BRICK_SPACING+i*40-81,BRICK_TOP_OFFSET*2+2);
        redBricks.setColor(Color.red);
        add(redBricks);
    }
    
    for(var i = 0; i < 12;i++){
        var orangeBricks = new Rectangle(BRICK_WIDTH,BRICK_HEIGHT);
        orangeBricks.setPosition(BRICK_SPACING+i*40-81, BRICK_TOP_OFFSET*3+2*2);
        orangeBricks.setColor(Color.orange);
        add(orangeBricks);
        var orangeBricks = new Rectangle(BRICK_WIDTH, BRICK_HEIGHT);
        orangeBricks.setPosition(BRICK_SPACING+i*40-81,BRICK_TOP_OFFSET*4+2*3);
        orangeBricks.setColor(Color.orange);
        add(orangeBricks);
    }
    
    for(var i = 0; i < 12;i++){
        var greenBricks = new Rectangle(BRICK_WIDTH,BRICK_HEIGHT);
        greenBricks.setPosition(BRICK_SPACING+i*40-81, BRICK_TOP_OFFSET*5+2*4);
        greenBricks.setColor(Color.green);
        add(greenBricks);
        var greenBricks = new Rectangle(BRICK_WIDTH, BRICK_HEIGHT);
        greenBricks.setPosition(BRICK_SPACING+i*40-81,BRICK_TOP_OFFSET*6+2*5);
        greenBricks.setColor(Color.green);
        add(greenBricks);
    }
    
    for(var i = 0; i < 12;i++){
        var blueBricks = new Rectangle(BRICK_WIDTH,BRICK_HEIGHT);
        blueBricks.setPosition(BRICK_SPACING+i*40-81, BRICK_TOP_OFFSET*7+2*6);
        blueBricks.setColor(Color.blue);
        add(blueBricks);
        var blueBricks = new Rectangle(BRICK_WIDTH, BRICK_HEIGHT);
        blueBricks.setPosition(BRICK_SPACING+i*40-81,BRICK_TOP_OFFSET*8+2*7);
        blueBricks.setColor(Color.blue);
        add(blueBricks);
    }
}

                        if (typeof start === 'function') {
                            start();
                        }
                    };
  	</script>
		<style>
			canvas {
    				border: 1px solid black;
			}
		</style>
	</body>
</html>

